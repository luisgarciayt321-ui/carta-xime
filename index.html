<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carta Rom치ntica</title>
<style>
body, html {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: Arial, sans-serif;
  font-weight: bold;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  color: #fff;
  position: relative;
}

/* Fondos */
#background, #background2 {
  position: absolute;
  top:0; left:0;
  width:100%; height:100%;
  background-size: cover;
  background-position: center;
  transition: opacity 2s ease-in-out;
  z-index: -2;
}
#background2 { opacity:0; z-index:-3; }

/* Fondo oscuro final */
#overlayFinal {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background: rgba(0,0,0,0);
  transition: background 2s ease;
  z-index:4;
}

/* Login */
#login {
  text-align: center;
  background: rgba(255, 192, 203, 0.85);
  padding: 50px;
  border-radius: 25px;
  box-shadow: 0 0 25px rgba(0,0,0,0.4);
  z-index: 10;
}
#login input { padding:12px; font-size:18px; border-radius:12px; border:1px solid #ccc; outline:none; }
#login button { padding:12px 25px; margin-left:10px; font-size:18px; border-radius:12px; border:none; background:#ff1493; color:white; cursor:pointer; }
#login button:hover{ background:#ff69b4; }

/* Carta centrada */
#carta {
  display:none;
  max-width:700px;
  text-align:center;
  background: rgba(0,0,0,0.5);
  padding: 40px;
  border-radius: 20px;
  box-shadow:0 0 20px rgba(0,0,0,0.5);
  position: relative;
  z-index: 5;
}

.parrafo {
  margin-bottom: 25px;
  opacity: 0;
}

/* Texto final grande */
#textoFinal {
  position:absolute;
  top:50%;
  left:50%;
  transform: translate(-50%, -50%);
  font-size: 60px;
  color:#ff1493;
  text-align:center;
  opacity:0;
  z-index:6;
  transition: opacity 2s ease;
  text-shadow: 2px 2px 10px rgba(0,0,0,0.7);
}
</style>
</head>
<body>

<div id="background"></div>
<div id="background2"></div>
<div id="overlayFinal"></div>

<!-- M칰sica -->
<audio id="musica" src="mi_cancion.mp3" loop></audio>

<div id="login">
  <h2>Introduce la contrase침a</h2>
  <input type="password" id="password" placeholder="Contrase침a">
  <button onclick="checkPassword()">Entrar</button>
</div>

<div id="carta">
  <h1>仇벒잺Xime仇벒잺</h1>
  <p class="parrafo" id="p1">S칠 que no llevamos mucho tiempo hablando, pero siento que te conozco de toda la vida. Hay algo en la forma en que conectamos que me hace sentir como si hubieran pasado a침os en lugar de semanas.</p>
  <p class="parrafo" id="p2">Disfruto cada segundo de nuestras conversaciones, especialmente cuando hacemos llamadas. Me encanta escuchar tu voz, sentir tu risa y compartir esos peque침os momentos que se quedan en mi coraz칩n.</p>
  <p class="parrafo" id="p3">Quer칤a decirte que me gustas mucho, m치s de lo que puedo expresar con palabras. Espero que sientas lo especial que eres para m칤, porque cada detalle tuyo me hace sonre칤r.</p>
  <p class="parrafo" id="p4">Con todo mi cari침o y ternura,<br>Luis</p>
</div>

<div id="textoFinal">游눘 Te amo mucho 游눘</div>

<script>
const passwordCorrecta = "te amo xime";
const loginDiv = document.getElementById("login");
const cartaDiv = document.getElementById("carta");
const musica = document.getElementById("musica");
const overlay = document.getElementById("overlayFinal");
const textoFinal = document.getElementById("textoFinal");

// Fotos de fondo
const fotos=['foto1.jpg','foto2.jpg','foto3.jpg','foto4.jpg']; 
let current=0;
const bg1=document.getElementById('background');
const bg2=document.getElementById('background2');

function startBackground(){
  bg1.style.backgroundImage = `url('${fotos[current]}')`;
  setInterval(()=>{
    const next = (current+1)%fotos.length;
    bg2.style.backgroundImage = `url('${fotos[next]}')`;
    bg2.style.opacity = 1;
    setTimeout(()=>{
      bg1.style.backgroundImage = `url('${fotos[next]}')`;
      bg2.style.opacity = 0;
      current = next;
    },2000);
  },6000);
}

// Funci칩n para mostrar p치rrafo letra por letra
function mostrarLetra(elem, velocidad, callback){
  const texto = elem.textContent;
  elem.textContent = "";
  elem.style.opacity = 1;
  let i=0;
  const interval = setInterval(()=>{
    elem.textContent += texto[i];
    i++;
    if(i >= texto.length){
      clearInterval(interval);
      // espera 4s y desaparece lentamente
      setTimeout(()=>{
        elem.style.transition = "opacity 2s ease";
        elem.style.opacity = 0;
        setTimeout(()=>{ if(callback) callback(); },2000);
      },4000);
    }
  },velocidad);
}

// Mostrar los p치rrafos uno tras otro y luego el texto final
function mostrarCarta(){
  const p1 = document.getElementById("p1");
  const p2 = document.getElementById("p2");
  const p3 = document.getElementById("p3");
  const p4 = document.getElementById("p4");

  mostrarLetra(p1, 70, ()=>{
    mostrarLetra(p2, 70, ()=>{
      mostrarLetra(p3, 70, ()=>{
        mostrarLetra(p4, 70, ()=>{
          // Texto final aparece
          textoFinal.style.opacity = 1;
          overlay.style.background = "rgba(0,0,0,0.3)";

          // Despu칠s de 3s, todo se vuelve negro y m칰sica se desvanece
          setTimeout(()=>{
            overlay.style.background = "rgba(0,0,0,1)";
            textoFinal.style.opacity = 0;
            cartaDiv.style.opacity = 0;
            bg1.style.opacity = 0;
            bg2.style.opacity = 0;

            // Desvanecer m칰sica
            let fadeOut = setInterval(()=>{
              if(musica.volume > 0.02){
                musica.volume -= 0.02;
              } else {
                musica.volume = 0;
                musica.pause();
                clearInterval(fadeOut);
              }
            },100);
          },3000);
        });
      });
    });
  });
}

// Funci칩n al entrar contrase침a
function checkPassword(){
  const pass = document.getElementById("password").value;
  if(pass.toLowerCase() === passwordCorrecta){
    loginDiv.style.display = "none";
    cartaDiv.style.display = "block";

    // Iniciar m칰sica
    musica.volume = 0;
    musica.play().then(()=>{
      let vol=0;
      const fade = setInterval(()=>{
        if(vol<1){ vol += 0.02; musica.volume = vol; } 
        else clearInterval(fade);
      },100);
    }).catch(err => console.log("Error audio:", err));

    startBackground();
    mostrarCarta();
  } else {
    alert("Contrase침a incorrecta 游땩");
  }
}
</script>

</body>
</html>